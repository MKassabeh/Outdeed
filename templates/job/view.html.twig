{% extends "base.html.twig" %}

{% block title %}Outdeed - Détails d'une offre{% endblock %}

{% block body %}

<div class="container blanc text-center py-1 my-3">
    <h1> Détails </h1>
</div>

<div class="my-5 container blanc">
    <div class="row">
        <div class="col-12 text-center">
            <h1 class="mb-2 font_title">
                {{ job.title|capitalize }} | {{ job.companyName|capitalize }}
            </h1>
            <p style="font-size: 16px !important;" class="mb-4 badge bg-info text-dark">{{job.category}}</p><br>
        </div>
    </div>

    <div class="row">
        <div class="col-0 col-md-1 col-lg-1"></div>
        <div class="card_body col-lg-2 col-md-4 mt-md-4 col-12 text-center text-md-start text-lg-start">
            <img width="125" class="img-fluid" src="{{ asset('img/category/' ~ logoCategories[job.category]) }}"
                alt="{{ job.category }}">
            <div class="mt-lg-3 mt-md-5">

                <p class="text_head"><strong>Localisation</strong> <i class="fas fa-map-marker-alt"></i> : <br>{{
                    job.city
                    }}</p>
                <p class="text_head"><strong>Offre publiée le :<br> </strong>{{ job.publishedAt ?
                    job.publishedAt|date('d/m/Y') : '' }}</p>
            </div>
        </div>
        <div class="col-lg-6 col-md-7 col-12 text-center text-md-start text-lg-start">
            <h3 class="font_title mt-4"> Description de l'entreprise : </h3>
            <p>{{ job.descriptionCompany|nl2br }}</p>
            <h3 class="font_title mt-4"> Description de l'offre : </h3>
            <p>{{ job.descriptionJob|nl2br }}</p>

            <h3 class="font_title mt-4"> Profil Recherché : </h3>
            <p>{{ job.descriptionApplicant|nl2br }}</p>
            {% if job.benefits %}
            <h5 class="font_title">Avantages : </h5>
            <p>{{ job.benefits }}</p>
            {% endif %}
        </div>
        <div class="col-lg-2 col-md-10 col-10 text-center m-auto text-md-center text-lg-start">
            <div class="p-3 border card-header">
                <p class="text_head">{{ job.schedule|capitalize }}</p>
                <p class="text_head">{{ job.wages|capitalize }} par mois</p>
                <p class="text_head">{{ job.contractType|upper }}</p>
                {% if (app.user.userType == 'candidate') %}
                <a href="{{ path('apply', {id: job.id}) }}" class="btn btn-outline-primary">Postuler <i
                        class="fas fa-arrow-right"></i></a>
                {% endif %}
            </div>
            <hr class="text-center mt-3 mb-3 mx-auto" width="200">
            <div class="container my-3">
                <h5 class="text-center font_title">Commentaire de l'entreprise : </h5>
                <p>{{ job.companyComment|nl2br }}</p>
            </div>
        </div>
        <div class="col-0 col-md-0 col-lg-1"></div>


    </div>

    <div class="text-center">
        <a href="{{ path('favourite_add', {id: job.id}) }}" class=" mb-3 mt-2 btn btn-outline-warning">
            <i class="far fa-heart"></i> Ajouter aux favoris
        </a>
    </div>
</div>

<div class="container text-center py-1 my-3">
    <h1> Dans la même catégorie ... </h1>
</div>

<div class="d-flex flex-column container mb-5">
    {% for jobs in jobs %}
    {% if jobs.id != job.id %}
    <div class="card my-3">
        <div class="card-body">
            <div class="d-flex justify-content-between">
                <h5 class="card-title">{{ jobs.title }}</h5>
                <img width="50" class="img-fluid" src="{{ asset('img/category/' ~ logoCategories[job.category]) }}"
                    alt="{{ job.category }}">
            </div>
            <h6 class="card-subtitle mb-2 text-muted">{{ jobs.companyName}}</h6>
            <p class="card-text">{{ jobs.descriptionJob|nl2br }}</p>
            <a href="{{ path('job_view', {id: jobs.id}) }}" class="btn btn-outline-primary">Voir plus ...</a>
        </div>
    </div>
    {% endif %}
    {% endfor %}
</div>



{% endblock %}