{% extends 'base.html.twig' %}

{% block title %}Outdeed - Mon compte
{% endblock %}

{% block body %}

<div class="container">
    <div class="row my-3 d-flex justify-content-center">
        <div class="col-lg-10 col-md-10 col-8 blanc">
            <h1 class="text-center font_title">Mon compte candidat</h1>
        </div>
    </div>
</div>

<div class="container border-radius p-3">
    <div class="row d-flex justify-content-lg-around justify-content-md-center justify-content-center">
        <div class="col-lg-5 my-lg-0 my-3 my-md-3 col-md-10 col-8 blanc">
            <div class="p-3 row d-flex justify-content-center">
                <div class="col-lg-3 col-md-10 col-12 text-center text-md-start text-lg-start">
                    <img class="img-fluid border-radius shadow" src="{{candidate.pdp}}" alt="photo du candidat">
                </div>
            </div>
            <div class="row d-flex justify-content-around">
                <div class="col-lg-5 col-md-11 col-11 text-md-center text-center text-lg-start">
                    <h5 class="fw-bold"> Mon profil Outdeed </h5>
                </div>
                <div class="col-lg-5 col-md-6 col-11 text-md-center text-lg-end text-center">
                    <span>
                        {{candidate.firstName}}
                        {{candidate.lastName}} <i class="far fa-address-card"></i>
                    </span>
                    <br>
                    <span>
                        {{candidate.city}} <i class="fas fa-map-pin"></i>
                    </span>
                </div>
            </div>
            <div class="row d-flex justify-content-center">
                <div class="col-lg-11 col-11 col-md-11">
                    <hr>
                </div>
            </div>
            <div class="row mb-2 mb-md-0 mb-lg-0 justify-content-around">
                <div class="col-lg-5 col-11 col-md-5 text-lg-start text-md-start text-center">
                    <p class="font_title">
                        Adresse du domicile
                    </p>
                </div>
                <div class="col-lg-5 col-11 col-md-5 text-lg-end text-md-end text-center">
                    <p>
                        {{ candidate.address }}
                    </p>
                </div>
            </div>
            <div class="row mb-2 mb-md-0 mb-lg-0 justify-content-around">
                <div class="col-lg-5 col-11 col-md-5 text-center text-md-start text-lg-start">
                    <p class="font_title">
                        Date de naissance
                    </p>
                </div>
                <div class="col-lg-5 col-11 col-md-5 text-md-end text-lg-end text-center">
                    <p>
                        {{ candidate.birthdate|date("d-m-Y") }}
                    </p>
                </div>
            </div>
            <div class="row mb-2 mb-md-0 mb-lg-0 justify-content-around">
                <div class="col-lg-5 col-11 col-md-5 text-center text-md-start text-lg-start">
                    <p class="font_title">
                        Numéro de téléphone portable
                    </p>
                </div>
                <div class="col-lg-5 col-11 col-md-5 text-md-end text-lg-end text-center">
                    {# {% set bar = "aabbcc"|split('', 2) %}
                    bar contains ['aa', 'bb', 'cc'] #}
                    <p>
                        {% set phone = candidate.phoneNumber|split('', 2) %}
                        {{phone[0]}}.{{phone[1]}}.{{phone[2]}}.{{phone[3]}}.{{phone[4]}}
                    </p>
                </div>
            </div>
            <div class="row mb-2 mb-md-0 mb-lg-0 d-flex justify-content-center">
                <div class="col-lg-11 col-11 col-md-11">
                    <hr>
                </div>
            </div>
            <div class="row mb-2 mb-md-0 mb-lg-0 justify-content-around">
                <div class="col-lg-5 col-11 col-md-5 text-center text-md-start text-lg-start">
                    <p class="font_title">
                        Adresse email
                    </p>
                </div>
                <div class="col-lg-5 col-11 col-md-5 text-md-end text-lg-end text-center">
                    <p>
                        {{ candidate.user.email }}
                    </p>
                </div>
            </div>
            <div class="row mb-2 mb-md-0 mb-lg-0 justify-content-around">
                <div class="col-lg-5 col-11 col-md-5 text-center text-md-start text-lg-start">
                    <p class="font_title">
                        Etat du compte
                    </p>
                </div>
                <div class="col-lg-5 col-11 col-md-5 text-md-end text-lg-end text-center">
                    {% if candidate.user.completed == true %}
                    {% set status = 'Vérifié' %}
                    {% set color = 'success' %}
                    {% set i = '<i class="fas fa-check"></i>' %}
                    {% else %}
                    {% set status = 'Non vérifié' %}
                    {% set color = 'danger' %}
                    {% set i = '<i class="fas fa-times"></i>' %}
                    {% endif %}
                    <p class="fw-bold text-{{ color }}">
                        {{ status }} {{ i|raw }}
                    </p>
                </div>
            </div>
            <div class="row mb-2 mb-md-0 mb-lg-0 d-flex justify-content-center">
                <div class="col-lg-11 col-11 col-md-11">
                    <hr>
                </div>
            </div>
            <div class="mb-3 row d-flex text-center justify-content-around">
                <div class="mb-lg-0 mb-md-0 mb-3 col-lg-5 col-11 col-md-5 text-md-end text-lg-end text-center">
                    <a class="btn btn-outline-primary" href="{{ asset(candidate.cv) }}"
                        download="{{candidate.firstName}}_{{candidate.lastName}}_CV.pdf">
                        Télécharger mon CV
                    </a>
                </div>
                <div class="col-lg-5 col-11 col-md-5 text-center text-md-start text-lg-start">
                    <a class="btn btn-outline-warning" href="{{ path('candidate_edit', {id: candidate.id}) }}">
                        Modifier mon profil
                    </a>
                </div>
            </div>
        </div>
        <div class="col-lg-5 my-lg-0 my-md-3 my-3 col-md-10 col-8 blanc">
            <div class="row mt-3 d-flex justify-content-center">
                <div class="col-lg-12 col-11 col-md-11 text-center">
                    <h5 class="fw-bold"> Mes candidatures </h5>
                </div>
            </div>
            <div class="row d-flex justify-content-center">
                <div class="col-lg-11 col-md-11 col-11 text-end">
                    <span class="text-muted">Triée(s) par date</span>
                </div>
            </div>

            {% if applications is empty %}
            <div class="row d-flex justify-content-center">
                <div class="col-lg-11 col-md-11 col-11">
                    <hr>
                </div>
            </div>
            {% include 'empty.html.twig' %}
            {% endif %}

            {% for applicant in applications %}
            <div class="row d-flex justify-content-center">
                <div class="col-lg-11 col-11 col-md-11">
                    <hr>
                </div>
            </div>
            <div class="row mb-md-3 mb-lg-0 d-flex justify-content-center">
                <div class="col-lg-4 col-md-4 col-11 fw-bold text-md-start text-lg-start text-center">
                    <span>{{applicant.getJob().getTitle()}}</span>
                </div>
                <div class="col-lg-4 col-md-4 col-11 text-md-start text-lg-start text-center">
                    <span>{{applicant.getJob().getContractType()}}</span>
                </div>
                <div class="col-lg-3 col-md-3 col-11 text-md-end text-lg-end text-center">
                    <a class="" href="{{ path('job_view', {id: applicant.getJob().getId()}) }}"><i
                            class="fas fa-eye"></i>Voir l'offre</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<div class="container border-radius p-3">
    <div class="row d-flex justify-content-around">
        <div class="col-lg-5 my-lg-0 my-md-3 my-3 col-md-10 col-8 blanc">
            <div class="row mt-3 d-flex justify-content-center">
                <div class="col-lg-12 col-11 col-md-11 text-center">
                    <h5 class="fw-bold"> Mes expériences professionnelles </h5>
                </div>
            </div>
            {% if experiences is empty %}
            <div class="row d-flex justify-content-center">
                <div class="col-lg-11 col-11 col-md-11">
                    <hr>
                </div>
            </div>
            {% include 'empty.html.twig' %}
            {% else %}
            {% for experience in experiences %}
            <div class="row d-flex justify-content-center">
                <div class="col-lg-11 col-11 col-md-11">
                    <hr>
                </div>
            </div>
            <div class="row d-flex justify-content-around">
                <div class="col-lg-10 col-11 col-md-10 text-center text-md-end text-lg-end">
                    <span class="fw-bold"> {{ experience.jobName }}</span> chez {{ experience.companyName }} pendant {{
                    experience.duration }} {% if experience.duration == 1 %}an{% else %}ans{% endif %}
                </div>
                <div class="col-lg-2 col-11 col-md-2 text-md-start text-lg-start text-center">
                    <a title="Supprimer" href="{{ path('experience_delete', {id: experience.id}) }}"><i
                            class="far fa-trash-alt"></i></a>
                </div>
            </div>
            {% endfor %}
            {% endif %}
            <div class="row d-flex justify-content-center">
                <div class="col-lg-11 col-11 col-md-11">
                    <hr>
                </div>
            </div>

            <div class="row mb-3 d-flex justify-content-center">
                <div class="col-lg-11 col-11 col-md-11 text-center">
                    <a class="btn btn-outline-success" href="{{ path('experience_add') }}">Ajouter une nouvelle
                        expérience professionnelle</a>
                </div>
            </div>

        </div>
        <div class="col-lg-5 my-lg-0 my-md-3 my-3 col-md-10 col-8 blanc">
            <div class="row mt-3 d-flex justify-content-center">
                <div class="col-lg-12 col-11 col-md-11 text-center">
                    <h5 class="fw-bold"> Mes compétences techniques </h5>
                </div>
            </div>
            {% if skills is empty %}
            <div class="row d-flex justify-content-center">
                <div class="col-lg-11 col-11 col-md-11">
                    <hr>
                </div>
            </div>
            {% include 'empty.html.twig' %}
            {% else %}
            {% for skill in skills %}
            <div class="row d-flex justify-content-center">
                <div class="col-lg-11 col-11 col-md-11">
                    <hr>
                </div>
            </div>
            <div class="row d-flex justify-content-around">
                <div class="col-lg-6 col-11 col-md-6 text-md-start text-lg-start text-center">
                    <span class="fw-bold"> {{ skill.skillName }}</span> pendant {{ skill.yearsOfExperience }} {% if
                    skill.yearsOfExperience == 1 %}an{% else %}ans{% endif %}
                </div>
                <div class="col-lg-1 col-11 col-md-1 text-md-start text-lg-start text-center">
                    <a title="Supprimer" href="{{ path('skill_delete', {id: skill.id}) }}"><i
                            class="far fa-trash-alt"></i></a>
                </div>
            </div>
            {% endfor %}
            {% endif %}
            <div class="row d-flex justify-content-center">
                <div class="col-lg-11 col-11 col-md-11">
                    <hr>
                </div>
            </div>
            <div class="row mb-3 d-flex justify-content-center">
                <div class="col-lg-11 col-11 col-md-11 text-center">
                    <a class="btn btn-outline-success" href="{{ path('skill_add') }}">Ajouter une nouvelle compétence
                        technique</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}